<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="./input.css" />
<link rel="stylesheet" type="text/css" href="./style.css" />
<title>Donor Details</title>
</head>
<body>
    <nav>
        <div id="nav-bar">
            <div id="left">
                <img class="logo" src="./images/logo.svg" alt="logo">
            </div>
            <div id="right">
                <ul>
                    <li><a href="mydonorDashboard.html">Dashboard</a></li>
                    <li><a href="newFoodList.html">Food List</a></li>
                    <li><a href="account.html">Account</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div id="container">
        <div id="details-container">
            <h2 class="line-below white">Donor Details</h2>
            <div>
                <p><strong style="font-size: 20px;">Item Name:</strong> <span id="itemName"></span></p>
                <p class="column-name">Quantity/Amount Required: <span id="quantityAmount"></span></p>
                <div class="input-field">
                    <input type="number" id="quantityInput" min="1" required spellcheck="false">
                    <label>Quantity to donate</label>
                </div>
            </div>
            <div class="button-container">
                <button class="positive-button" onclick="donate()">Fulfill Request</button>   
            </div>
        </div>
    </div>

    <script>
        var queryParams = new URLSearchParams(window.location.search);
        var itemName = queryParams.get('itemName');
        var quantityAmount = parseInt(queryParams.get('quantityAmount'));

        var itemNameElement = document.getElementById("itemName");
        var quantityElement = document.getElementById("quantityAmount");
        var quantityInput = document.getElementById("quantityInput");

        itemNameElement.innerText = itemName;
        quantityElement.innerText = quantityAmount;

        if (itemName == "Apple" || itemName == "Tomato") {
            quantityElement.innerText += ' KG'; // Append 'kg' for Apple and Tomato
        }

        function donate() {
            var quantityToDonate = parseInt(quantityInput.value);
            if (quantityToDonate >= 1) {
                var newQuantity = quantityAmount - quantityToDonate;
                if (newQuantity >= 0) {
                    quantityAmount = newQuantity;
                    quantityElement.innerText = quantityAmount;
                    if (itemName == "Apple" || itemName == "Tomato") {
                        quantityElement.innerText += ' KG';
                        alert("Thank you for your donation of " + quantityToDonate + " KG " + itemName + "!");
                    } else {
                        alert("Thank you for your donation of " + quantityToDonate + " " + itemName + "!");
                    }
                } else {
                    alert("Insufficient quantity available.");
                }
            } else {
                alert("Please enter a valid quantity (minimum 1).");
            }
        }
    </script>
</body>
</html>
